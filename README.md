# 🎁 DonationAPI - 후원 연동 플러그인

![Version](https://img.shields.io/badge/version-2.0.0-blue.svg)
![Minecraft](https://img.shields.io/badge/minecraft-1.20.1-green.svg)
![Java](https://img.shields.io/badge/java-17+-orange.svg)

**DonationAPI**는 치지직, 숲 후원을 마인크래프트 서버와 연동하는 플러그인입니다.

방송에 후원이 오면 후원 금액에 설정된 이벤트가 마크 내에서 실행됩니다.

중계서버를 이용해 후원 데이터를 받는 방식으로 마크 서버에 부하가 최소화됩니다.

## 🚀 주요 기능

- **실시간 후원 감지**: 치지직, 숲 후원을 실시간으로 감지
- **커스터마이즈 이벤트**: 아이템 지급, 메시지 출력, 명령어 실행, 랜덤 아이템, 즉사, 몹 소환, 랜덤 효과
- **미션 시스템**: 숲 도전미션/대결미션 지원
- **범위 이벤트**: 금액 범위로 이벤트 설정 가능
- **플랫폼별 설정**: 공통/개별/플랫폼별 이벤트 설정
- **애드온 대상 시스템**: 다른 플러그인과 연동하여 커스텀 대상 처리
- **자동 재연결**: 네트워크 문제 시 자동 재연결

## 🎯 지원 플랫폼

| 플랫폼 | 상태 | 지원 기능 | API 방식 |
|--------|------|----------|----------|
| 치지직 (CHZZK) | ✅ 지원 | 치즈 후원 | 공식 API |
| 숲 (SOOP) | ✅ 지원 | 별풍선, 애드벌룬, 도전미션, 대결미션 | |

### 플랫폼별 특징
- **치지직**: 공식 API 사용으로 안정적이나 미션 후원 미지원
- **숲**: 모든 후원 유형과 미션 시스템 완벽 지원

## 💰 가격 정보

- **스트리머**: 심사 후 무료 제공 (스트리머 서버, 후원 야생 컨텐츠 등)
- **일반 서버**: 월 5,000원
- **서버팩**: 별도 문의

## 📚 문서 목차

### 시작하기
- [📦 설치 가이드](installation.md) - 플러그인 설치 및 초기 설정
- [⚙️ 설정 가이드](configuration.md) - 설정 파일 및 YML 구조 상세 가이드

### 사용법
- [🎮 명령어](commands.md) - 유저 및 관리자 명령어
- [🎪 이벤트 시스템](events.md) - 이벤트 종류 및 설정 방법
- [🏷️ 플레이스홀더](placeholders.md) - 사용 가능한 모든 플레이스홀더

### 고급 기능
- [🎯 미션 시스템](mission-system.md) - 숲 도전미션/대결미션 완벽 가이드
- [🔧 애드온 개발](addon-development.md) - 커스텀 액션 및 대상 개발 가이드

### 기타
- [📋 이용약관](terms.md) - 플러그인 이용약관

## ⚡ 빠른 시작

1. **플러그인 설치**
   ```bash
   # plugins 폴더에 DonationAPI.jar 복사
   # 서버 재시작
   ```

2. **API 키 설정**
   ```yaml
   # config.yml
   api:
     key: "YOUR_API_KEY_HERE"
   ```

3. **방송 연동**
   ```bash
   /후원연동 치지직 your_channel_id
   ```

4. **이벤트 설정**
   ```bash
   /후원관리 이벤트설정 공통 1000 전체 메시지 감사합니다!
   ```

## 🎮 주요 명령어

### 유저 명령어
- `/후원연동 [플랫폼] [ID]` - 방송 연동
- `/후원연동 정보` - 연동 정보 확인

### 관리자 명령어
- `/후원관리 이벤트설정` - 이벤트 설정
- `/후원관리 목록` - 이벤트 목록 확인
- `/후원관리 시작/중지` - 후원 리스너 제어

## 🏆 이벤트 예제

### 기본 후원 이벤트
```bash
# 1000원 후원 시 메시지 출력
/후원관리 이벤트설정 공통 1000 전체 메시지 &a%donator_name%님 감사합니다!

# 5000원 후원 시 아이템 지급
/후원관리 이벤트설정 공통 5000 스트리머 아이템

# 10000원 후원 시 명령어 실행 (플레이어 권한)
/후원관리 이벤트설정 공통 10000 스트리머 명령어 PLAYER:/tp ~ ~100 ~

# 20000원 후원 시 OP 권한 명령어 실행
/후원관리 이벤트설정 공통 20000 스트리머 명령어 OP:/gamemode creative
```

### 범위 이벤트
```bash
# 1000~5000원 범위 이벤트
/후원관리 이벤트설정 공통 1000~5000 전체 메시지 범위 후원 감사합니다!
```

### 미션 이벤트 (숲)
```bash
# 정확한 금액 매칭
/후원관리 이벤트설정 공통 1234 스트리머 명령어 CONSOLE:say Perfect!

# 오차 범위 허용 (±5%)
config.yml에서 tolerance 설정 필요
```

## 🎯 미션 시스템 특징

### 도전미션
- 정확한 금액 매칭 우선
- 오차 범위 설정 가능
- 비율 실행 지원

### 대결미션
- 다중 금액 처리
- 우선순위 시스템
- 로깅 및 디버깅

## 🌟 고급 기능

### 메시지 타입
- `chat:` - 채팅 메시지
- `title:` - 타이틀 메시지
- `subtitle:` - 서브타이틀 메시지
- `actionbar:` - 액션바 메시지

### 명령어 접두사
- `CONSOLE:` - 콘솔에서 실행 (권한 제한 없음)
- `PLAYER:` - 플레이어 권한으로 실행 (기본값)
- `OP:` - 임시 OP 권한으로 실행 (자동 복원)

### 애드온 시스템
```bash
# 애드온 액션 실행
/후원관리 이벤트설정 공통 1000 스트리머 애드온 custom_effect power=5 duration=10

# 애드온 대상 사용
/후원관리 이벤트설정 공통 5000 길드멤버 메시지 길드원들 감사합니다!

# 대상 목록 확인
/후원관리 대상목록
```

### 무한 이벤트
```bash
# 모든 금액에서 실행되는 기본 이벤트
/후원관리 이벤트설정 공통 무한 전체 메시지 후원 감사합니다!
```

## 📊 우선순위 시스템

1. **정확한 금액** - 설정된 정확한 금액 이벤트
2. **범위 이벤트** - 금액이 포함되는 범위 (좁은 범위 우선)
3. **무한 이벤트** - 모든 금액에서 실행되는 기본 이벤트

## 🔧 기술 사양

- **Java**: 17 이상
- **Minecraft**: 1.20.1 (Spigot) - 1.19 이하는 별도 문의
- **네트워크**: Velocity 지원, Socket.IO + REST API
- **데이터**: YAML 파일 저장

## 🤝 지원 및 문의

- **Discord**: https://discord.gg/Sr42sSM7kr
- **문의**: 위 디스코드를 통해 문의 주세요

## 📄 라이센스

이 플러그인은 상업적 라이센스하에 배포됩니다. 자세한 내용은 [이용약관](terms.md)을 참조하세요.

---

**💡 Tip**: 처음 사용하시는 분은 [설치 가이드](installation.md)부터 시작하세요! 